# ğŸ“Â 01. **'try..catch'ì™€ ì—ëŸ¬ í•¸ë“¤ë§**

## 1-1. Â tryâ€¦catch ë™ì‘ ì•Œê³ ë¦¬ì¦˜

`tryâ€¦catch` ë¬¸ë²•ì€ `try`ì™€ `catch`ë¼ëŠ” ë‘ ê°œì˜ ì£¼ìš” ë¸”ë¡ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.

**âœï¸Â ê¸°ë³¸ ë¬¸ë²•**

```jsx
try {
  // ì½”ë“œ
} catch (err) {
  // ì—ëŸ¬ í•¸ë“¤ë§
}
```

1. `try {â€¦}` ë‚´ë¶€ì˜ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.
2. ì—ëŸ¬ê°€ ì—†ìœ¼ë©´, `try` ë‚´ë¶€ì˜ ë§ˆì§€ë§‰ ì¤„ê¹Œì§€ ì‹¤í–‰ë˜ê³  `catch` ë¸”ë¡ì€ ê±´ë„ˆë›´ë‹¤.
3. ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ìˆœê°„ `try` ë¸”ë¡ì˜ ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ì‹¤í–‰ë˜ì§€ ì•Šê³  `catch` ë¸”ë¡ìœ¼ë¡œ ì¦‰ì‹œ ì´ë™í•œë‹¤.

   ë³€ìˆ˜ `error`ëŠ” ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…ì´ ë‹´ê¸´ ì—ëŸ¬ ê°ì²´ë¥¼ í¬í•¨í•œë‹¤.

<img width="700" alt="Image" src="https://github.com/user-attachments/assets/a7b7897d-d2ef-41f5-b908-d4dde778a5d5" />

## 1-2. ì˜ˆì‹œ ì‚´í´ë³´ê¸°

### 1-2-1. ì—ëŸ¬ê°€ ì—†ëŠ” ì˜ˆì‹œ

```jsx
try {
  console.log("try ë¸”ë¡ ì‹œì‘"); // (1)

  // ...ì—ëŸ¬ê°€ ì—†ìŠµë‹ˆë‹¤.

  console.log("try ë¸”ë¡ ë"); // (2)
} catch (err) {
  console.log("ì—ëŸ¬ê°€ ì—†ìœ¼ë¯€ë¡œ, catch ë¸”ë¡ ì‹¤í–‰ ì•ˆ ë¨"); // (3)
}
```

### 1-2-2.Â ì—ëŸ¬ê°€ ìˆëŠ” ì˜ˆì‹œ

```jsx
try {
  console.log("try ë¸”ë¡ ì‹œì‘"); // (1) ì •ìƒ ì‹¤í–‰

  undefinedVariable; // (2) ì—ëŸ¬ ë°œìƒ! catchë¡œ ì´ë™

  console.log("try ë¸”ë¡ ë"); // (3) ì‹¤í–‰ ì•ˆ ë¨ âŒ
} catch (err) {
  console.log(`ì—ëŸ¬ ë°œìƒ: ${err.message}`); // (4) ì—ëŸ¬ í•¸ë“¤ë§ë¨ âœ…
}
```

## 1-3. tryâ€¦catch ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

### âš ï¸Â `tryâ€¦catch`ëŠ” ì˜¤ì§ ëŸ°íƒ€ì„ ì—ëŸ¬ì—ë§Œ ë™ì‘í•œë‹¤.

`try..catch`ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ(runnable) ì½”ë“œ ì¦‰, ìœ íš¨í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì—ë§Œ ë™ì‘í•œë‹¤.

```jsx
try {
  console.log("Hello");
  eval("alert('Hi'"); // SyntaxError ë°œìƒ! (ë¬¸ë²• ì˜¤ë¥˜)
} catch (e) {
  console.log("ì´ ë©”ì‹œì§€ëŠ” ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤."); // ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
}
```

ì´ë ‡ê²Œ ìœ íš¨í•œ ì½”ë“œì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²ƒì„ â€œëŸ°íƒ€ì„ ì—ëŸ¬(runtime error)â€ í˜¹ì€ â€œì˜ˆì™¸(exception)â€ ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

### âš ï¸Â `tryâ€¦catch` ëŠ” ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•œë‹¤.

`setTimeout` ì²˜ëŸ¼ **â€˜ìŠ¤ì¼€ì¤„ ëœ(scheduled)â€™ ì½”ë“œ**ì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ëŠ”Â `try..catch`ì—ì„œ ì¡ì•„ë‚¼ ìˆ˜ ì—†ë‹¤.

```jsx
try {
  setTimeout(function () {
    undefinedVariable; // try...catch ë°”ê¹¥ì—ì„œ ì‹¤í–‰ë¨
  }, 1000);
} catch (e) {
  console.log("ì´ ë©”ì‹œì§€ëŠ” ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤."); // ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
}
```

- `setTimeout` ë‚´ì˜ ì½œë°± í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ `try...catch` ë²”ìœ„ë¥¼ ë²—ì–´ë‚œë‹¤.
- `try..catch`ë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì— ìœ„ì¹˜ì‹œì¼œ í•´ê²°í•œë‹¤.

â­ï¸ ìŠ¤ì¼€ì¤„ ëœ í•¨ìˆ˜ ë‚´ë¶€ì˜ ì˜ˆì™¸ë¥¼ ì¡ìœ¼ë ¤ë©´, ë°˜ë“œì‹œ í•¨ìˆ˜ ë‚´ë¶€ì— `tryâ€¦catch` ë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤.

```jsx
setTimeout(function () {
  try {
    // try .. catch í•¨ìˆ˜ ë‚´ë¶€ì— êµ¬í˜„!!
    undefinedVariable;
  } catch {
    console.log("ì—ëŸ¬ë¥¼ ì¡ì•˜ìŠµë‹ˆë‹¤!");
  }
}, 1000);
```

## 1-4. Â ì—ëŸ¬ ê°ì²´ì™€ ì£¼ìš” í”„ë¡œí¼í‹°

ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì—ëŸ¬ ìƒì„¸ë‚´ìš©ì´ ë‹´ê¸´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ê·¸ ë‹¤ìŒ, `catch` ë¸”ë¡ì— ì´ ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œë‹¤.

### ë‚´ì¥ ì—ëŸ¬ ì „ì²´ì™€ ì—ëŸ¬ ê°ì²´ê°€ ê°€ì§€ëŠ” ì£¼ìš” í”„ë¡œí¼í‹°

- `name` : ì—ëŸ¬ ì´ë¦„. ì •ì˜ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ë•Œë¬¸ì— ë°œìƒí•œ ì—ëŸ¬ì¼ ê²½ìš° â€œ`ReferenceError`â€ê°€ ì´ë¦„ì´ ëœë‹¤.
- `message` : ì—ëŸ¬ ìƒì„¸ ë‚´ìš©ì„ ë‹´ê³  ìˆëŠ” ë©”ì‹œì§€
- `stack` : í˜„ì¬ í˜¸ì¶œ ìŠ¤íƒ. ì—ëŸ¬ë¥¼ ìœ ë°œí•œ ì¤‘ì²© í˜¸ì¶œë“¤ì˜ ìˆœì„œ ì •ë³´ë¥¼ ê°€ì§„ ë¬¸ìì—´ë¡œ ë””ë²„ê¹… ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

**âœ…Â ì‚¬ìš© ì˜ˆì‹œ**

```dart
try {
  lalala; // ì—ëŸ¬, ë³€ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ
} catch(err) {
  console.log(err.name); // ReferenceError
  console.log(err.message); // lalala is not defined
  console.log(err.stack); // ReferenceError: lalala is not defined at ... (í˜¸ì¶œ ìŠ¤íƒ)

  // ì—ëŸ¬ ì „ì²´ ë³´ê¸°
  console.log(err); // ReferenceError: lalala is not defined
}
```

## 1-5. Â ì„ íƒì  â€˜catchâ€™ ë°”ì¸ë”©

- ìµœê·¼ì— ì¶”ê°€ëœ ë¬¸ë²•ìœ¼ë¡œ êµ¬ì‹ ë¸Œë¼ìš°ì €ëŠ” í´ë¦¬í•„ì´ í•„ìš”

```dart
try {
  // ...
} catch { // <-- (err) ì—†ì´ ì“¸ ìˆ˜ ìˆìŒ
  // ...
}
```

ì—ëŸ¬ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©´,Â `catch`ì—ì„œ ì´ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.

## 1-6. â€˜tryâ€¦catch ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œâ€™

```dart
let json = "{ bad json }";

try {
  let user = JSON.parse(json); // âŒ ì—ëŸ¬ ë°œìƒ
  console.log( user.name ); // âŒ ì´ ì½”ë“œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

} catch (e) {
  // ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì œì–´ íë¦„ì´ catchìœ¼ë¡œ ë„˜ì–´ì˜´
  console.log( "ë°ì´í„°ì— ì—ëŸ¬ê°€ ìˆì–´ ì¬ìš”ì²­ì„ ì‹œë„í•©ë‹ˆë‹¤." );
  console.log( e.name );
  console.log( e.message );
}
```

## 1-7. throw ì—°ì‚°ì & ì§ì ‘ ì—ëŸ¬ ë§Œë“¤ê¸°

### 1-7-1. throw ì—°ì‚°ì

`throw` ì—°ì‚°ìëŠ” ì—ëŸ¬ë¥¼ ìƒì„±í•˜ë©° ë¬¸ë²•ì€ ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•œë‹¤.

```jsx
try {
  throw new Error("í…ŒìŠ¤íŠ¸ ì—ëŸ¬");
} catch {
  // (err) ì—†ì´ ì‚¬ìš© ê°€ëŠ¥ (ES10+)
  console.log("ì—ëŸ¬ë¥¼ ì¡ì•˜ì§€ë§Œ ìƒì„¸ ì •ë³´ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ.");
}
```

- ìˆ«ì, ë¬¸ìì—´ ê°™ì€ ì›ì‹œí˜• ìë£Œë¥¼ í¬í•¨í•œ ì–´ë–¤ ê²ƒì´ë“  ì—ëŸ¬ ê°ì²´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ ë‚´ì¥ ì—ëŸ¬ì™€ì˜ í˜¸í™˜ì„ ìœ„í•´ ë˜ë„ë¡ ì—ëŸ¬ ê°ì²´ì— í”„ë¡œí¼í‹°ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” `Error`, `SyntaxError`, `ReferenceError`, `TypeError` ë“± í‘œì¤€ ì—ëŸ¬ ê°ì²´ ê´€ë ¨ ìƒì„±ìë¥¼ ì§€ì›í•œë‹¤. ì´ë¥¼ ì´ìš©í•˜ì—¬ ì—ëŸ¬ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

  ```jsx
  let error = new Error(message);

  let error = new SyntaxError("ì˜ëª»ëœ JSON í˜•ì‹");
  let error = new ReferenceError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ ì°¸ì¡°");
  throw new TypeError("ì˜ëª»ëœ íƒ€ì… ì‚¬ìš©");
  ```

### 1-7-2. ì½”ë“œ ì˜ˆì‹œë¡œ ì—ëŸ¬ ì‚´í´ë³´ê¸°

```jsx
let error = new Error("Error ë°œìƒ");

console.log(error.name); // Error
console.log(error.message); // Error ë°œìƒ
```

ì¼ë°˜ ê°ì²´ê°€ ì•„ë‹Œ ë‚´ì¥ ìƒì„±ìë¥¼ ì‚¬ìš©í•´ ë§Œë“  ë‚´ì¥ ì—ëŸ¬ ê°ì²´ì˜ `name` í”„ë¡œí¼í‹°ëŠ” ìƒì„±ì ì´ë¦„ê³¼ ë™ì¼í•œ ê°’ì„ ê°–ëŠ”ë‹¤. í”„ë¡œí¼í‹° `message`ì˜ ê°’ì€ ì¸ìˆ˜ì—ì„œ ê°€ì ¸ì˜¨ë‹¤.

```jsx
try {
  JSON.parse("{ ì˜ëª»ëœ í˜•ì‹ì˜ json }");
} catch (e) {
  console.log(e.name); // SyntaxError
  console.log(e.message); // Unexpected token b in JSON at position 2
}
```

ìœ„ ì½”ë“œì²˜ëŸ¼ ì˜ëª»ëœ ë°ì´í„°ë¥¼ ë°›ì•˜ì„ ë•Œ, `JSON.parse`ëŠ” `SyntaxError` ì—ëŸ¬ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.

```jsx
let json = '{ "age": 30 }'; // ë¶ˆì™„ì „í•œ ë°ì´í„° (ì´ë¦„ì´ ì—†ëŠ” ê²½ìš°)

try {
  let user = JSON.parse(json); // <-- ì—ëŸ¬ ì—†ìŒ

  if (!user.name) {
    throw new SyntaxError("ë¶ˆì™„ì „í•œ ë°ì´í„°: ì´ë¦„ ì—†ìŒ"); // ğŸ’¥
  }

  console.log(user.name);
} catch (e) {
  console.log("JSON Error: " + e.message); // JSON Error: ë¶ˆì™„ì „í•œ ë°ì´í„°: ì´ë¦„ ì—†ìŒ
}
```

`name` í”„ë¡œí¼í‹°ê°€ ì—†ìœ¼ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•œ ì½”ë“œì´ë‹¤.

ğŸ’¥Â í‘œì‹œí•œ ì¤„ì—ì„œ `throw` ì—°ì‚°ìëŠ” `message`ë¥¼ ì´ìš©í•´ `SyntaxError`ë¥¼ ìƒì„±í•œë‹¤. ì—ëŸ¬ ìƒì„± ë°©ì‹ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ìì²´ì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ê³¼ ë™ì¼í•˜ë‹¤. (ì—ëŸ¬ ë°œìƒ â†’ `try` ì‹¤í–‰ ì¤‘ì§€ â†’ `catch` ë¬¸ìœ¼ë¡œ ì œì–´ íë¦„ ë„˜ì–´ê°)

### 1-7-3. ì»¤ìŠ¤í…€ ì—ëŸ¬ ê°ì²´ ì •ì˜í•˜ê¸°

```jsx
// ê¸°ë³¸ throw ì‚¬ìš©
throw new Error("ì—ëŸ¬ ë©”ì‹œì§€");

// ì»¤ìŠ¤í…€ ì—ëŸ¬ ê°ì²´ ë§Œë“¤ê¸°
class CustomError extends Error {
  constructor(message) {
    super(message);
    this.name = "CustomError"; // ì—ëŸ¬ ì´ë¦„ ì„¤ì •
  }
}

try {
  throw new CustomError("ì´ê±´ ì»¤ìŠ¤í…€ ì—ëŸ¬ì…ë‹ˆë‹¤.");
} catch (error) {
  console.log(error.name); // CustomError
  console.log(error.message); // ì´ê±´ ì»¤ìŠ¤í…€ ì—ëŸ¬ì…ë‹ˆë‹¤.
}
```

## 1-8. ì—ëŸ¬ ë‹¤ì‹œ ë˜ì§€ê¸° (rethrow)

1. `catch`ê°€ ëª¨ë“  ì—ëŸ¬ë¥¼ ë°›ëŠ”ë‹¤.
2. `catch(error) {â€¦}` ë¸”ë¡ ì•ˆì—ì„œ ì—ëŸ¬ ê°ì²´ `error`ë¥¼ ë¶„ì„í•œë‹¤.
3. ì—ëŸ¬ ì²˜ë¦¬ ë°©ë²•ì„ ì•Œì§€ ëª»í•  ê²½ìš° `throw error`ë¥¼ í•œë‹¤.
4. ë³´í†µ `instanceof` ëª…ë ¹ì–´ë¡œ ì—ëŸ¬ íƒ€ì…ì„ ì²´í¬í•œë‹¤.

âœ…Â **ì½”ë“œ ì˜ˆì‹œ - ì—ëŸ¬ ë‹¤ì‹œ ë˜ì§€ê¸°ë¡œ SyntaxErrorë§Œ ì²˜ë¦¬ë˜ê²Œ í•˜ê¸°**

```jsx
try {
  JSON.parse("{ì˜ëª»ëœ JSON}");
} catch (error) {
  if (error instanceof SyntaxError) {
    console.log("JSON ì—ëŸ¬ ì²˜ë¦¬ë¨.");
  } else {
    throw error; // ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ ë‹¤ì‹œ ë˜ì§€ê¸°
  }
}
```

`catch` ë¸”ë¡ ì•ˆì˜ ğŸ’¥Â í‘œì‹œì—ì„œ ë‹¤ì‹œ ë˜ì ¸ì§„(rethrow) ì—ëŸ¬ëŠ” `tryâ€¦catch` ë°–ìœ¼ë¡œ ë˜ì ¸ì§„ë‹¤.

ì´ë•Œ ë°”ê¹¥ì— `tryâ€¦catch`ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ì—ëŸ¬ë¥¼ ì°¾ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¢…ë£Œëœë‹¤.

âœ…Â **ë‹¤ì‹œ ë˜ì ¸ì§„ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ ì²˜ë¦¬í•˜ê¸°**

```jsx
function readData() {
  let json = '{ "age": 30 }';

  try {
    // ...
    blabla(); // ì—ëŸ¬!
  } catch (err) {
    // ...
    if (!(err instanceof SyntaxError)) {
      throw err; // ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ ë‹¤ì‹œ ë˜ì§€ê¸°
    }
  }
}

try {
  readData();
} catch (err) {
  console.log("External catch got: " + err); // ì—ëŸ¬ë¥¼ ì¡ìŒ
}
```

ìœ„ í•¨ìˆ˜ëŠ” `SyntaxError`ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, í•¨ìˆ˜ ë°”ê¹¥ì˜ `tryâ€¦catch` ì—ì„œëŠ” ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬ë„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

## 1-9. **tryâ€¦catchâ€¦finally**

`finally`ë¥¼ ì¶”ê°€í•´ì„œ ì—ëŸ¬ ì½”ë“œë¥¼ í•˜ë‚˜ ë” ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

`finally`ëŠ” ì‹¤í–‰ ê²°ê³¼ì— ìƒê´€ì—†ì´ ì‹¤í–‰ì„ ì™„ë£Œí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.

```jsx
try {
   ... ì½”ë“œë¥¼ ì‹¤í–‰ ...
} catch(error) {
   ... ì—ëŸ¬ í•¸ë“¤ë§ ...
} finally {
   ... í•­ìƒ ì‹¤í–‰ ...
}
```

- ì—ëŸ¬ê°€ ì—†ëŠ” ê²½ìš° : `try` ì‹¤í–‰ì´ ëë‚œ í›„
- ì—ëŸ¬ê°€ ìˆëŠ” ê²½ìš° : `catch` ì‹¤í–‰ì´ ëë‚œ í›„

**âœ…Â ì‚¬ìš© ì˜ˆì‹œ**

```jsx
try {
  console.log("ì‹œì‘");
  throw new Error("ì—ëŸ¬ ë°œìƒ!");
} catch (e) {
  console.log("ì—ëŸ¬ ì²˜ë¦¬");
} finally {
  console.log("ë¬´ì¡°ê±´ ì‹¤í–‰ë¨");
}
```

**ì‘ë™ íë¦„**

1. â€œì—ëŸ¬ë¥¼ ë§Œë“œì‹œê² ìŠµë‹ˆê¹Œâ€ ok ì¼ ë•Œ : `try` â†’ `catch` â†’ `finally`
2. No ì¼ ë•Œ : `try` â†’ `finally`

### 1-9-1. í”¼ë³´ë‚˜ì¹˜ í•¨ìˆ˜ ì˜ˆì‹œ ì½”ë“œ

```jsx
let num = +prompt("ì–‘ì˜ ì •ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", 35);

let diff, result;

function fib(n) {
  if (n < 0 || Math.trunc(n) != n) {
    throw new Error("ìŒìˆ˜ë‚˜ ì •ìˆ˜ê°€ ì•„ë‹Œ ê°’ì€ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
  }
  return n <= 1 ? n : fib(n - 1) + fib(n - 2);
}

let start = Date.now();

try {
  result = fib(num);
} catch (e) {
  result = 0;
} finally {
  diff = Date.now() - start;
}

console.log(result || "ì—ëŸ¬ ë°œìƒ");

console.log(`ì—°ì‚° ì‹œê°„: ${diff}ms`);
```

`fib`Â í•¨ìˆ˜ê°€ ì—ëŸ¬ ì—†ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë“  ì—ëŸ¬ê°€ ë°œìƒí•˜ë“  ìƒê´€ì—†ì´,Â `finally`ë¥¼ ì‚¬ìš©í•˜ë©´ ì—°ì‚° ì‹œê°„ì„ ì œëŒ€ë¡œ ì¸¡ì •í•  ìˆ˜ ìˆë‹¤.

ìˆ«ì `35`ë¥¼ ì…ë ¥í•˜ë©´ â†’ `try` ë‹¤ìŒì— `finally`ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ ì—°ì‚° ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ìˆ«ì `-1` ì„ ì…ë ¥í•˜ë©´ â†’ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ì„œ ì—°ì‚° ì‹œê°„ì€ 0msê°€ ëœë‹¤.

### 1-9-2. tryâ€¦catchâ€¦finally ì•ˆì˜ ë³€ìˆ˜ëŠ” ì§€ì—­ ë³€ìˆ˜ì´ë‹¤.

`try` ë¸”ë¡ ì•ˆì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ëŠ” ê·¸ ë¸”ë¡ ì•ˆì—ì„œë§Œ ìœ íš¨í•œ ì§€ì—­ ë³€ìˆ˜ê°€ ëœë‹¤.

### 1-9-4. finallyì™€ return

- `finally`ì ˆì€ `tryâ€¦catch`ì ˆì„ ë¹ ì ¸ë‚˜ê°€ëŠ” ì–´ë–¤ ê²½ìš°ì—ë„ ë¬´ì¡°ê±´ ì‹¤í–‰ëœë‹¤.
- `return` ì„ ì‚¬ìš©í•´ì„œ ëª…ì‹œì ìœ¼ë¡œ ë¹ ì ¸ë‚˜ê°€ë ¤ëŠ” ê²½ìš°ë„ ë™ì¼í•˜ë‹¤.

```jsx
function test() {
  try {
    return "tryì—ì„œ ë°˜í™˜"; // (1) ì›ë˜ëŠ” ì´ ê°’ì´ ë°˜í™˜ë  ì˜ˆì •
  } catch (e) {
    return "catchì—ì„œ ë°˜í™˜";
  } finally {
    return "finallyì—ì„œ ë°˜í™˜"; // (2) ìµœì¢…ì ìœ¼ë¡œ ì´ ê°’ì´ ë°˜í™˜ë¨
  }
}

console.log(test()); // ê²°ê³¼: "finallyì—ì„œ ë°˜í™˜"
```

`finally` ë¸”ë¡ì—ì„œ `return`ì´ ìˆìœ¼ë©´ `try`ì˜ `return`ì„ ë¬´ì‹œí•˜ê³  `finally`ì—ì„œ ì§€ì •í•œ ê°’ì´ ìµœì¢… ë°˜í™˜ë˜ë¯€ë¡œ ì£¼ì˜í•´ì•¼í•œë‹¤. (`finally`ì—ì„œ returnì´ ì‹¤í–‰ íë¦„ì„ ë®ì–´ì“¸ ìˆ˜ ìˆë‹¤)

### 1-9-5. tryâ€¦finally

`catch` ì ˆì´ ì—†ëŠ” ìƒí™©ì—ë„ ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤. `tryâ€¦finally` ì•ˆì—ì„œëŠ” ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ê³  ì‹¶ì§€ ì•Šì§€ë§Œ, ì‹œì‘í•œ í”„ë¡œì„¸ìŠ¤ê°€ ë§ˆë¬´ë¦¬ ë˜ì—ˆëŠ”ì§€ í™•ì‹¤íˆ ì²´í¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.

âœ…Â **ì½”ë“œ ì˜ˆì‹œ**

```jsx
function func() {
  // ë¬´ì–¸ê°€ë¥¼ ì¸¡ì •í•˜ëŠ” ê²½ìš°ì™€ ê°™ì´ ëë§ºìŒì´ ìˆì–´ì•¼ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤
  try {
    // ...
  } finally {
    // ìŠ¤í¬ë¦½íŠ¸ê°€ ì£½ë”ë¼ë„ ì™„ë£Œë¨
  }
}
```

ìœ„ ì½”ë“œì—”Â `catch`ê°€ ì—†ê¸° ë•Œë¬¸ì—Â `try`Â ì•ˆì—ì„œ ë°œìƒí•œ ì—ëŸ¬ëŠ” í•­ìƒ ë°–ìœ¼ë¡œ ë–¨ì–´ì ¸ ë‚˜ì˜¨ë‹¤.Â `finally`ëŠ” ì‹¤í–‰ íë¦„ì´ í•¨ìˆ˜ë¥¼ ë– ë‚˜ê¸° ì „ì— ì‹¤í–‰ëœë‹¤.

## 1-10. ì „ì—­ catch

ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª…ì„¸ì„œì—ëŠ” `tryâ€¦catch`ì—ì„œ ì²˜ë¦¬í•˜ì§€ ëª»í•œ ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ìˆëŠ” ëŒ€ì‘ ë°©ë²•ì´ ì í˜€ìˆì§€ ì•Šë‹¤.

ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” `window.onerror` ë¥¼ ì´ìš©í•˜ì—¬ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```jsx
window.onerror = function (message, url, line, col, error) {
  console.log(`ğŸ”¥ ì—ëŸ¬ ë°œìƒ!`);
  console.log(`ë©”ì‹œì§€: ${message}`);
  console.log(`íŒŒì¼: ${url}`);
  console.log(`ìœ„ì¹˜: ${line}:${col}`);
  console.log(`ì—ëŸ¬ ê°ì²´:`, error);
};

/* ì¶œë ¥ ì˜ˆì‹œ
ë©”ì‹œì§€: ReferenceError: badFunc is not defined
íŒŒì¼: script.js
ìœ„ì¹˜: 12:5
ì—ëŸ¬ ê°ì²´: ReferenceError: badFunc is not defined
*/
```

- `message` : ì—ëŸ¬ ë©”ì‹œì§€
- `url` : ì—ëŸ¬ê°€ ë°œìƒí•œ ìŠ¤í¬ë¦½íŠ¸ì˜ URL
- `line`, `col` : ì—ëŸ¬ê°€ ë°œìƒí•œ ê³³ì˜ ì¤„ê³¼ ì—´ ë²ˆí˜¸
- `error` : ì—ëŸ¬ ê°ì²´

### 1-10-1. ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

```jsx
<script>
  window.onerror = function(message, url, line, col, error) {
    console.log(`ì—ëŸ¬ ë°œìƒ: ${message} (ìœ„ì¹˜: ${line}:${col})`);
  };

  function readData() {
    badFunc(); // ì—ëŸ¬ê°€ ë°œìƒí•œ ì¥ì†Œ
  }

  readData();
</script>
```

âš ï¸Â ì „ì—­ í•¸ë“¤ëŸ¬ `window.onerror`ëŠ” ì£½ì–´ë²„ë¦° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µêµ¬í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, ì£¼ë¡œ ê°œë°œìì—ê²Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.

**ğŸ”—Â ì—ëŸ¬ ë¡œê¹… ê´€ë ¨ ìƒìš© ì„œë¹„ìŠ¤ : https://www.muscula.com/docs/get-started/**

1. ì„œë¹„ìŠ¤ë¥¼ ê°€ì…í•˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼(í˜¹ì€ ìŠ¤í¬ë¦½íŠ¸ url)ì„ ë°›ëŠ”ë°, ê°œë°œìëŠ” ì´ íŒŒì¼ì„ í˜ì´ì§€ì— ì‚½ì…í•œë‹¤.
2. ë°›ì€ íŒŒì¼ì€ ì»¤ìŠ¤í…€Â `window.onerror`Â í•¨ìˆ˜ë¥¼ ì„¤ì •
3. ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, ì´ ì»¤ìŠ¤í…€ í•¨ìˆ˜ê°€ ì—ëŸ¬ì— ê´€í•œ ë‚´ìš©ì„ ë‹´ì•„ ì„œë¹„ìŠ¤ì— ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ë³´ëƒ„
4. ê°œë°œìëŠ” ì„œë¹„ìŠ¤ ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•´ ê¸°ë¡ëœ ì—ëŸ¬ë¥¼ í™•ì¸í•œë‹¤.

## ğŸ’¡Â ìš”ì•½

| **ê°œë…**         | **ì„¤ëª…**                                                |
| ---------------- | ------------------------------------------------------- |
| `tryâ€¦catch`      | ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰ íë¦„ì„ ë³€ê²½í•˜ì—¬ ì—ëŸ¬ ì²˜ë¦¬             |
| `catch(error)`   | ì—ëŸ¬ ê°ì²´ë¥¼ ë°›ì•„ `name`, `message`, `stack` ì •ë³´ë¥¼ ì œê³µ |
| `finally`        | ì—ëŸ¬ ë°œìƒ ì—¬ë¶€ì™€ ê´€ê³„ ì—†ì´ í•­ìƒ ì‹¤í–‰ë¨                  |
| `throw`          | ê°•ì œë¡œ ì—ëŸ¬ë¥¼ ë°œìƒ ì‹œí‚´                                 |
| `rethrow`        | íŠ¹ì • ì—ëŸ¬ë§Œ ì²˜ë¦¬í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë‹¤ì‹œ ë˜ì§€ê¸° ê°€ëŠ¥          |
| `window.onerror` | ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì „ì—­ ì—ëŸ¬ í•¸ë“¤ë§                      |

<br>

---

# ğŸ“Â 02. ì»¤ìŠ¤í…€ ì—ëŸ¬ì™€ ì—ëŸ¬ í™•ì¥

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `Error`, `SyntaxError`, `ReferenceError` ê°™ì€ ë‚´ì¥ ì—ëŸ¬ í´ë˜ìŠ¤ê°€ ì œê³µëœë‹¤. í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì •í•œ ì—ëŸ¬ ìƒí™©ì„ ë” ëª…í™•í•˜ê²Œ í‘œí˜„í•˜ê¸° ìœ„í•´ ì§ì ‘ ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì»¤ìŠ¤í…€ ì—ëŸ¬ëŠ” **ê¸°ì¡´ Error í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„** ë§Œë“¤ ìˆ˜ ìˆê³ , íŠ¹ì • ìƒí™©ì„ ì²˜ë¦¬í•˜ëŠ”ë° í•„ìš”í•œ ì¶”ê°€ì ì¸ ì†ì„±ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

## 2-1. ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ ë§Œë“¤ê¸°

### 2-1-1. ê¸°ë³¸ì ì¸ ì»¤ìŠ¤í…€ ì—ëŸ¬ ìƒì„±

```jsx
class ValidationError extends Error {
  constructor(message) {
    super(message); // ë¶€ëª¨ í´ë˜ìŠ¤(Error)ì˜ ìƒì„±ì í˜¸ì¶œ
    this.name = "ValidationError"; // ì—ëŸ¬ ì´ë¦„ ì§€ì •
  }
}

try {
  throw new ValidationError("Invalid data input");
} catch (err) {
  console.log(err.name); // ValidationError
  console.log(err.message); // Invalid data input
  console.log(err.stack); // ì—ëŸ¬ ë°œìƒ ìœ„ì¹˜ í¬í•¨
}
```

ğŸ”Â ì½”ë“œ ì„¤ëª…

- `ValidationError`ëŠ” `Error` ë¥¼ ìƒì†ë°›ì•„ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, `message` ë¥¼ ë¶€ëª¨ ìƒì„±ì (`super`)ë¥¼ í†µí•´ ì „ë‹¬í•œë‹¤.
- `name`ì„ ì§€ì •í•˜ì—¬ ì–´ë–¤ ì—ëŸ¬ì¸ì§€ ëª…í™•í•˜ê²Œ êµ¬ë³„í•œë‹¤.
- `stack` ì†ì„±ì„ í†µí•´ ì—ëŸ¬ê°€ ì–´ë””ì—ì„œ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### 2-1-2. ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ í™œìš©í•œ ë°ì´í„° ê²€ì¦ (ValidationError)

ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì…ë ¥ì„ ë°›ì„ ë•Œ ë°ì´í„° ê²€ì¦ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.

ì‚¬ìš©ì ì…ë ¥ì´ JSON í˜•ì‹ì¸ì§€ í™•ì¸ í›„, í•„ìš”í•œ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” í•¨ìˆ˜ (`readUser()`) í•¨ìˆ˜ë¥¼ êµ¬í˜„í•œ ì˜ˆì‹œë¡œ í™•ì¸í•´ë³´ì.

```jsx
class ValidationError extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
}

// ì‚¬ìš©ë²•
function readUser(json) {
  let user = JSON.parse(json); // JSON íŒŒì‹±

  if (!user.age) {
    throw new ValidationError("No field: age");
  }
  if (!user.name) {
    throw new ValidationError("No field: name");
  }

  return user;
}

// try..catchì™€ readUserë¥¼ í•¨ê»˜ ì‚¬ìš©í•œ ì˜ˆì‹œ
try {
  let user = readUser('{ "age": 25 }'); // name í•„ë“œê°€ ì—†ìŒ
} catch (err) {
  if (err instanceof ValidationError) {
    console.log("ğŸš¨ Invalid data:", err.message); // Invalid data: No field: name
  } else if (err instanceof SyntaxError) {
    console.log("âŒ JSON Syntax Error:", err.message);
  } else {
    throw err; // ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” ë‹¤ì‹œ ë˜ì§€ê¸°
  }
}
```

ğŸ”Â ì½”ë“œ ì„¤ëª…

- JSON íŒŒì‹± í›„ , í•„ìˆ˜ í•„ë“œ(`name`, `age`)ê°€ ì—†ë‹¤ë©´ `ValidationError`ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
- `tryâ€¦catch`ì—ì„œ `instanceof` ë¥¼ ì‚¬ìš©í•˜ì—¬ `ValidationError`ì™€ `SyntaxError` ë¥¼ êµ¬ë³„í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.

## 2-2. **ë” ê¹Šê²Œ ìƒì†í•˜ê¸°**

### 2-2-1. ì»¤ìŠ¤í…€ ì—ëŸ¬ í™•ì¥ (ìƒì†)

ê¸°ë³¸ `ValidationError`ëŠ” â€œì…ë ¥ê°’ì´ ì˜¬ë°”ë¥¸ê°€?â€ ë¥¼ ê²€ì¦í•˜ëŠ”ë° ì‚¬ìš©ë˜ì§€ë§Œ, ì–´ë–¤ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆëŠ”ì§€ ëª…í™•íˆ í•˜ê¸°ìœ„í•´ ìƒˆë¡œìš´ í´ë˜ìŠ¤ (`PropertyRequiredError`)ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

**âœï¸Â PropertyRequiredError í´ë˜ìŠ¤ ì¶”ê°€**

```jsx
class ValidationError extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
}

// âœ… ValidationErrorë¥¼ í™•ì¥í•œ PropertyRequiredError
class PropertyRequiredError extends ValidationError {
  constructor(property) {
    super(`No property: ${property}`);
    this.name = "PropertyRequiredError";
    this.property = property; // ì–´ë–¤ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆëŠ”ì§€ ì €ì¥
  }
}

// ì‚¬ìš©ë²•
function readUser(json) {
  let user = JSON.parse(json);

  if (!user.age) {
    throw new PropertyRequiredError("age");
  }
  if (!user.name) {
    throw new PropertyRequiredError("name");
  }

  return user;
}

try {
  let user = readUser('{ "age": 25 }'); // name í•„ë“œê°€ ì—†ìŒ
} catch (err) {
  if (err instanceof PropertyRequiredError) {
    console.log("â— Missing property:", err.property); // Missing property: name
  } else if (err instanceof ValidationError) {
    console.log("ğŸš¨ Validation Error:", err.message);
  } else if (err instanceof SyntaxError) {
    console.log("âŒ JSON Syntax Error:", err.message);
  } else {
    throw err; // ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” ë‹¤ì‹œ ë˜ì§€ê¸°
  }
}
```

**ğŸ”Â ì½”ë“œ ì„¤ëª…**

- `PropertyRequiredError`ëŠ” `ValidationError`ë¥¼ ìƒì†ë°›ì•„ í•„ë“œ ëˆ„ë½ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í™•ì¥í–ˆë‹¤.
- `property` ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ ì–´ë–¤ í•„ë“œê°€ ë¹ ì¡ŒëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### 2-2-2. ê¸°ë³¸ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì—¬ëŸ¬ ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸°

ë§¤ë²ˆ `this.name = â€¦` ì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ê·€ì°®ì„ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê¸°ë³¸ì ì¸ ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ (`MyError`)ë¥¼ ì¶”ê°€í•´ë³´ì.

**âœï¸Â MyError í´ë˜ìŠ¤ ì¶”ê°€**

```jsx
class MyError extends Error {
  constructor(message) {
    super(message);
    this.name = this.constructor.name; // ìë™ìœ¼ë¡œ í´ë˜ìŠ¤ ì´ë¦„ì„ nameìœ¼ë¡œ ì„¤ì •
  }
}

class ValidationError extends MyError {}

class PropertyRequiredError extends ValidationError {
  constructor(property) {
    super(`No property: ${property}`);
    this.property = property;
  }
}

console.log(new PropertyRequiredError("name").name); // PropertyRequiredError
```

**ğŸ”ì½”ë“œÂ ì„¤ëª…**

- `MyError`ë¥¼ ë§Œë“¤ê³  ëª¨ë“  ì»¤ìŠ¤í…€ ì—ëŸ¬ê°€ ì´ë¥¼ ìƒì†ë°›ë„ë¡ í•˜ë©´ ìë™ìœ¼ë¡œ `name`ì´ ì„¤ì •ëœë‹¤.
- ê¸°ì¡´ `this.name = "í´ë˜ìŠ¤ëª…"`ì„ ì„¤ì •í•˜ëŠ” ë²ˆê±°ë¡œì›€ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

## 2-3. ì˜ˆì™¸ ê°ì‹¸ê¸° (Wrapping Exception)

ì—ëŸ¬ ì¢…ë¥˜ê°€ ë§ì•„ì§€ë©´, ì—¬ëŸ¬ ê°œì˜ `if(error instatanceof â€¦)`ë¬¸ì„ ì“°ëŠ” ê²ƒì´ ë¹„íš¨ìœ¨ì ì´ë‹¤.

í•˜ë‚˜ì˜ â€œí° ë²”ìœ„ ì—ëŸ¬(`ReadError`)â€ë¡œ ê°ì‹¸ê²Œ ë˜ë©´, ìƒì„¸í•œ ì›ì¸ì€ `cause` ì†ì„±ì„ í†µí•´ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.

```jsx
class ReadError extends Error {
  constructor(message, cause) {
    super(message);
    this.cause = cause; // â­ï¸ ì›ë˜ ë°œìƒí•œ ì—ëŸ¬ ì €ì¥
    this.name = "ReadError";
  }
}

class ValidationError extends Error {}
class PropertyRequiredError extends ValidationError {}

function validateUser(user) {
  if (!user.age) {
    throw new PropertyRequiredError("age");
  }
  if (!user.name) {
    throw new PropertyRequiredError("name");
  }
}

function readUser(json) {
  let user;

  try {
    user = JSON.parse(json);
  } catch (err) {
    throw new ReadError("Syntax Error", err);
  }

  try {
    validateUser(user);
  } catch (err) {
    throw new ReadError("Validation Error", err);
  }
}

try {
  readUser("{ ì˜ëª»ëœ í˜•ì‹ì˜ json }");
} catch (e) {
  if (e instanceof ReadError) {
    console.log("ğŸš¨ Read Error:", e.message);
    console.log("ğŸ” ì›ë˜ ì—ëŸ¬:", e.cause);
  } else {
    throw e;
  }
}
```

**ğŸ”ì½”ë“œÂ ì„¤ëª…**

- `ReadError`ë¥¼ ë§Œë“¤ì–´ `SyntaxError`ì™€ `ValidationError`ë¥¼ ê°ì‹¸ë„ë¡ êµ¬í˜„í•œë‹¤.
- `cause` ì†ì„±ì— ì›ë˜ ì—ëŸ¬ë¥¼ ì €ì¥í•´ë‘ë©´, í•„ìš”í•  ë•Œ ì›ë³¸ ì—ëŸ¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- `try...catch`ì—ì„œ `ReadError` í•˜ë‚˜ë§Œ ì²˜ë¦¬í•˜ë©´ ë˜ë¯€ë¡œ ì½”ë“œê°€ ê°„ê²°í•´ì§„ë‹¤.

## ğŸ’¡Â ìš”ì•½

| **ê°œë…**                | **ì„¤ëª…**                                                          |
| ----------------------- | ----------------------------------------------------------------- |
| ì»¤ìŠ¤í…€ ì—ëŸ¬             | `Error`ë¥¼ ìƒì†ë°›ì•„ íŠ¹ì • ìƒí™©ì— ë§ëŠ” ì—ëŸ¬ ìƒì„±                     |
| ì»¤ìŠ¤í…€ ì—ëŸ¬ í™•ì¥        | `ValidationError` â†’ `PropertyRequiredError` ì²˜ëŸ¼ ê³„ì¸µ êµ¬ì¡°ë¥¼ ë§Œë“¦ |
| ê¸°ë³¸ ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ | `MyError`ë¥¼ ë§Œë“¤ì–´ name ìë™ ì„¤ì •                                 |
| ì˜ˆì™¸ ê°ì‹¸ê¸°             | `ReadError`ë¥¼ ë§Œë“¤ì–´ ì—¬ëŸ¬ ì—ëŸ¬ë¥¼ í•˜ë‚˜ë¡œ ê´€ë¦¬                      |

<br>

---

# ğŸ“Â 03. ì—ëŸ¬ ì„¤ì • ì¶”ê°€ì •ë¦¬

## 3-1. ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•

### 3-1-1. React-Queryì—ì„œ onError ì˜µì…˜ ì‚¬ìš©í•˜ê¸°

**â­ï¸ `onError` ì˜µì…˜ì´ í•„ìš”í•œ ì´ìœ ëŠ”?**

- `useMutation`ì´ë‚˜ `useQuery`ë¥¼ ì‚¬ìš©í•  ë•Œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ
- ì´ë•Œ `onError` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤íŒ¨ ì‹œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì •ì˜í•œë‹¤.

```jsx
import { useMutation } from '@tanstack/react-query';

const addTodo = async (newTodo) => {
  const response = await fetch('/api/todos', {
    method: 'POST',
    body: JSON.stringify(newTodo),
  });

  if (!response.ok) {
    throw new Error('Failed to add todo');
  }

  return response.json();
};

const MyComponent = () => {
  const mutation = useMutation(addTodo, {
    onError: (error, variables, context) => { âœ… onError ì ìš©
      console.error(`ğŸš¨ Todo ì¶”ê°€ ì‹¤íŒ¨:`, error);
    },
  });

  return (
    <button onClick={() => mutation.mutate({ title: 'ìƒˆë¡œìš´ í•  ì¼' })}>
      í•  ì¼ ì¶”ê°€
    </button>
  );
};

```

### 3-1-2. react-router-domì—ì„œ ì—ëŸ¬ ì„¤ì •

**â­ï¸ RRDì—ì„œ ì˜¤ë¥˜ ì„¤ì •ì´ í•„ìš”í•œ ì´ìœ ëŠ”?**

- ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œë¡œ ì ‘ê·¼í•  ë•Œ, 404 í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ ê°€ëŠ¥
- API ìš”ì²­ ë“±ì˜ ë¬¸ì œë¡œ ì¸í•´ íŠ¹ì • í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ì§€ ëª»í•˜ë©´ ì—ëŸ¬ í˜ì´ì§€ë¡œ ì´ë™
- ë¼ìš°íŠ¸ ë‹¨ìœ„ì—ì„œ ì—ëŸ¬ í•¸ë“¤ë§ì„ í•˜ë©´ ê°œë³„ í˜ì´ì§€ì—ì„œ ë¶ˆí•„ìš”í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";
import HomePage from "./HomePage";
import ErrorPage from "./ErrorPage";
import NotFoundPage from "./NotFoundPage";

const router = createBrowserRouter([
  {
    path: "/",
    element: <HomePage />,
    errorElement: <ErrorPage />, // âŒ í•´ë‹¹ í˜ì´ì§€ ë¡œë”© ì¤‘ ì—ëŸ¬ ë°œìƒ ì‹œ ErrorPageë¡œ ì´ë™
  },
  {
    path: "*", // âŒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œë¡œ ì´ë™ ì‹œ NotFoundPageë¡œ ì´ë™
    element: <NotFoundPage />,
  },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

- `errorElement` : í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ í‘œì‹œí•  ì—ëŸ¬ í˜ì´ì§€ë¥¼ ì§€ì •
- `path: '*'` : ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œì— ì ‘ê·¼í•˜ë©´ `NotFoundPage`ë¥¼ ë³´ì—¬ì¤Œ
- ì¥ì : í˜ì´ì§€ë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ `try...catch`ë¥¼ ì“°ì§€ ì•Šê³  ë¼ìš°íŒ… ë‹¨ì—ì„œ í•œ ë²ˆì— ê´€ë¦¬ ê°€ëŠ¥í•˜ë‹¤.

### 3-1-3. Axios ì—ì„œ ì—ëŸ¬ í•¸ë“¤ë§

**â­ï¸ ì™œ `axios.interceptors.response` ë¥¼ ì‚¬ìš©í• ê¹Œ?**

- API ìš”ì²­ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ
- ìš”ì²­ì´ ì‹¤íŒ¨í•  ê²½ìš°, ì‘ë‹µ ìƒíƒœì— ë”°ë¼ ìë™ìœ¼ë¡œ íŠ¹ì • ì—ëŸ¬ í•¸ë“¤ë§ ë¡œì§ì„ ì‹¤í–‰ ê°€ëŠ¥
- ëª¨ë“  `axios` ìš”ì²­ì— ëŒ€í•´ ê³µí†µì ì¸ ì—ëŸ¬ í•¸ë“¤ë§ì´ í•„ìš”í•  ë•Œ ìœ ìš©

```jsx
import axios from "axios";

// ğŸ”¥ ëª¨ë“  axios ìš”ì²­ì— ëŒ€í•œ ê³µí†µì ì¸ ì—ëŸ¬ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€
axios.interceptors.response.use(
  (response) => {
    // ì„±ê³µì ì¸ ì‘ë‹µ
    return response;
  },
  (error) => {
    // ğŸš¨ ìš”ì²­ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤í–‰ë  ë¡œì§

    if (error.response) {
      // ì„œë²„ê°€ ì‘ë‹µì„ ë°˜í™˜í–ˆìœ¼ë‚˜ 2xx ë²”ìœ„ê°€ ì•„ë‹Œ ìƒíƒœ ì½”ë“œì¸ ê²½ìš°
      console.error(
        `ğŸš¨ ì„œë²„ ì˜¤ë¥˜ (${error.response.status}):`,
        error.response.data
      );
    } else if (error.request) {
      // ìš”ì²­ì´ ì´ë£¨ì–´ì¡Œìœ¼ë‚˜ ì‘ë‹µì„ ë°›ì§€ ëª»í•œ ê²½ìš° (ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ)
      console.error(`âš ï¸ ì„œë²„ ì‘ë‹µ ì—†ìŒ:`, error.request);
    } else {
      // ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ë°œìƒí•œ í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜
      console.error(`âŒ ìš”ì²­ ì„¤ì • ì˜¤ë¥˜:`, error.message);
    }

    // ğŸ”¥ ì—ëŸ¬ë¥¼ ë‹¤ì‹œ throwí•˜ì—¬ ê°œë³„ ìš”ì²­ì—ì„œ ì¶”ê°€ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë„ë¡ í•¨
    return Promise.reject(error);
  }
);

// âœ… ì‹¤ì œ API í˜¸ì¶œ ì˜ˆì‹œ
axios
  .get("/api/data")
  .then((response) => console.log("âœ… ë°ì´í„°:", response.data))
  .catch((error) => console.error("âŒ ìš”ì²­ ì‹¤íŒ¨:", error));
```

- `axios.interceptors.response.use()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ìš”ì²­ì˜ ì—ëŸ¬ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬
- `error.response` : ì„œë²„ì—ì„œ ì‘ë‹µì´ ì™”ì§€ë§Œ 2xx ë²”ìœ„ê°€ ì•„ë‹Œ ê²½ìš° (ì˜ˆ: 400, 500 ì˜¤ë¥˜)
- `error.request` : ìš”ì²­ì„ ë³´ëƒˆìœ¼ë‚˜ ì„œë²„ê°€ ì‘ë‹µí•˜ì§€ ì•Šì€ ê²½ìš° (ë„¤íŠ¸ì›Œí¬ ì¥ì• )
- `error.message` : ìš”ì²­ ìì²´ê°€ ì˜ëª»ëœ ê²½ìš° (ì˜ˆ: ì˜ëª»ëœ URL)
- ë§ˆì§€ë§‰ì— `Promise.reject(error)`ë¥¼ ì‚¬ìš©í•˜ì—¬, ê°œë³„ ìš”ì²­ì—ì„œë„ ì¶”ê°€ì ì¸ í•¸ë“¤ë§ ê°€ëŠ¥

ğŸ“šÂ ì°¸ê³ ë§í¬ : https://yoonhaemin.com/tag/experience/react-error-handling/

<br>

## 3-2. Sentry ë¡œ ì—ëŸ¬ ë¡œê¹…í•˜ê¸°

SentryëŠ” í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ê³  ì¶”ì í•˜ëŠ” ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ì´ë‹¤.

React, Vue, Angular, Node.js, Python ë“± ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì—ëŸ¬ ë°œìƒ ì‹œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤, ì‚¬ìš©ì ì •ë³´, í™˜ê²½ ì •ë³´ ë“±ì„ ìˆ˜ì§‘í•˜ì—¬ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

### 3-2-1. Sentry ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

1. ì—ëŸ¬ ì¶”ì  ìë™í™” : ì½”ë“œì—ì„œ `tryâ€¦catch` ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ëª¨ë“  ì—ëŸ¬ë¥¼ ìë™ìœ¼ë¡œ ê¸°ë¡í•œë‹¤.
2. ì‹¤ì‹œê°„ ì—ëŸ¬ ê°ì§€ : ì•±ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì•Œë¦¼ ë°›ê³  ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.
3. ì—ëŸ¬ ì›ì¸ ë¶„ì„ : ë°œìƒí•œ ì—ëŸ¬ì˜ stack trace ì™€ ê´€ë ¨ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ì œê³µí•œë‹¤.

### 3-2-2. Reactì— Sentry ì„¤ì •í•˜ê¸°

Sentry ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ í›„ DSNì„ ì„¤ì •í•´ì•¼í•œë‹¤.

```jsx
// sentryConfig.js

import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: "https://YOUR_DSN_HERE@sentry.io/PROJECT_ID", // Sentryì—ì„œ ì œê³µí•˜ëŠ” DSN ê°’
  integrations: [new Sentry.BrowserTracing()],
  tracesSampleRate: 1.0, // 0.0 ~ 1.0 ì‚¬ì´ ê°’ (1.0ì´ë©´ ëª¨ë“  íŠ¸ëœì­ì…˜ ì¶”ì )
});
```

### 3-2-3. Sentryë¡œ ì—ëŸ¬ ë¡œê¹…í•˜ê¸°

**âœï¸Â ì¼ë°˜ì ì¸ ì—ëŸ¬ ë¡œê¹… - Sentry.captureException()**

```jsx
try {
  throw new Error("í…ŒìŠ¤íŠ¸ ì—ëŸ¬ ë°œìƒ!");
} catch (error) {
  Sentry.captureException(error);
}
```

ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ ì—ëŸ¬ë¥¼ Sentry ì„œë²„ë¡œ ì „ì†¡í•˜ì—¬ ì¶”ì  ê°€ëŠ¥

**âœï¸Â Reactì—ì„œ ê¸€ë¡œë²Œ ì—ëŸ¬ í•¸ë“¤ë§í•˜ê¸°**

```jsx
import React from "react";
import * as Sentry from "@sentry/react";

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    Sentry.captureException(error); // â­ï¸ Sentryì— ì—ëŸ¬ ë¡œê·¸ ì „ì†¡
  }

  render() {
    if (this.state.hasError) {
      return <h1>âš ï¸ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</h1>;
    }
    return this.props.children;
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const App = () => (
  <ErrorBoundary>
    <MyComponent />
  </ErrorBoundary>
);

export default App;
```

- í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ìœ¼ë¡œ `componentDidCatch` ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ë¥¼ ê°ì§€í•œë‹¤.
- `tryâ€¦catch` ë¡œ ê°ì‹¸ê¸° ì–´ë ¤ìš´ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ë‚´ì—ì„œ ë°œìƒí•œ ë Œë”ë§ ì—ëŸ¬ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë‹¤.
- íŠ¹ì • UIë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆì–´ ì‚¬ìš©ìê°€ ì—ëŸ¬ ë°œìƒì„ ì¸ì§€í•  ìˆ˜ ìˆë‹¤.

### 3-2-4. React 19ì—ì„œ ì œê³µí•˜ëŠ” ìƒˆë¡œìš´ ì—ëŸ¬ í•¸ë“¤ë§ ë°©ì‹

**âœï¸Â ê¸°ì¡´ ë°©ì‹ì˜ í•œê³„ì **

- í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì´ê¸°ì— í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ì–´ë µë‹¤.
- ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì¤‘ ë°œìƒí•œ ì—ëŸ¬ë§Œ ê°ì§€í•  ìˆ˜ ìˆë‹¤.
- ErrorBoundaryë¥¼ ê°ì‹¸ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ì—†ë‹¤.
- React ë‚´ë¶€ì—ì„œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ëŠ” ê°ì§€í•  ìˆ˜ ì—†ë‹¤.

**âœï¸Â ê°œì„ ëœ ì—ëŸ¬ í•¸ë“¤ë§ íŠ¹ì§•**

- React19 ì˜ createRootì—ì„œ ì œê³µí•˜ëŠ” ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì˜µì…˜ (`onUncaughtError`, `onCaughtError`, `onRecoverableError`)ì„ ì‚¬ìš©í•¨
- ErrorBoundaryê°€ ì—†ì–´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ë¥¼ ê°ì§€ ê°€ëŠ¥
- React ë‚´ë¶€ì—ì„œ ìë™ ë³µêµ¬í•œ ì—ëŸ¬ê¹Œì§€ ì¶”ì  ê°€ëŠ¥

âœ…Â ì½”ë“œ ì˜ˆì‹œ

```jsx
import React from "react";
import { createRoot } from "react-dom/client";
import * as Sentry from "@sentry/react";

const container = document.getElementById("app");

const root = createRoot(container, {
  // ErrorBoundaryì— ì˜í•´ ì¡íˆì§€ ì•Šì€ ì¹˜ëª…ì ì¸(Uncaught) ì—ëŸ¬ ì²˜ë¦¬
  onUncaughtError: Sentry.reactErrorHandler((error, errorInfo) => {
    console.warn("Uncaught error", error, errorInfo.componentStack);
  }),
  // React ë‚´ë¶€ì—ì„œ ErrorBoundaryë¡œ ì¡íŒ ì—ëŸ¬ ì²˜ë¦¬
  onCaughtError: Sentry.reactErrorHandler(),
  // Reactê°€ ìë™ìœ¼ë¡œ ë³µêµ¬í•œ ì—ëŸ¬ ì²˜ë¦¬
  onRecoverableError: Sentry.reactErrorHandler(),
});

root.render(<App />);
```

**ğŸ“šÂ ì°¸ê³ ë§í¬** : https://docs.sentry.io/platforms/javascript/guides/react/
